<!DOCTYPE html>
<html>
  <head>
    <title>Testing bound jQuery events :: Joe Corcoran</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="author" content="Joe Corcoran">
<script type="text/javascript" src="//use.typekit.net/lbi3uvk.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<link rel="stylesheet" href="/public/fa.min.css">

<link rel="stylesheet" href="/public/main.min.css" type="text/css" />
<link rel="alternate" type="application/atom+xml" href="/feed.xml" />
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3245696-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </head>
  <body>
    <header role="banner" class="banner">
  <div class="banner-content">
    <h1><a href="/">Joe Corcoran</a></h1>
    <nav>
      <ul>
        <li><a href="/articles" class="active">Articles</a></li>
        <li><a href="/projects" >Projects</a></li>
      </ul>
    </nav>
  </div>
</header>

    <article class="post">
      <header>
        <h1>Testing bound jQuery events</h1>
        <time datetime="2010-11-12T21:29:00+01:00">12 November 2010</time>
        

  <ul class="tags">
    
      <li>
        <a href="/tags/javascript">javascript</a>
      </li>
    
      <li>
        <a href="/tags/jquery">jquery</a>
      </li>
    
      <li>
        <a href="/tags/bdd">bdd</a>
      </li>
    
      <li>
        <a href="/tags/testing">testing</a>
      </li>
    
      <li>
        <a href="/tags/jasmine">jasmine</a>
      </li>
    
  </ul>


      </header>
      <p>I&rsquo;ve been using <a href="http://pivotal.github.com/jasmine/">Jasmine</a>, along with velesin&rsquo;s <a href="https://github.com/velesin/jasmine-jquery">jasmine-jquery</a>, to test all of my JavaScript work recently.  jasmine-jquery provides some really handy matchers, but one thing that&rsquo;s missing is the ability to test whether an element has a bound event.</p>

<!--more-->

<p>I&rsquo;ve come up with the following matcher to do just that:</p>

<script src="https://gist.github.com/674339.js?file=toHaveEvent.js"> </script>

<p>Use it like so: <code>expect($(&#39;input#foo&#39;)).toHaveEvent(&#39;keyup&#39;);</code></p>

<p>I&rsquo;d be interested to hear of any thoughts or improvements.  Likewise, I&rsquo;ve started work on testing for events attached using <code>$.fn.live()</code>.  These are handled a bit differently, since live events aren&rsquo;t actually bound to the selected element.  Instead they sit there, bound to the <code>document</code>, listening for the event to bubble up the <acronym title="Document Object Model">DOM</acronym> tree.</p>

<script src="https://gist.github.com/674339.js?file=toHaveLive.js"> </script>

<p>So: <code>expect($(&#39;input#bar&#39;)).toHaveLive(&#39;focus&#39;);</code></p>

<p>Again, any improvements or thoughts are welcome.</p>

<p>You can make these matchers available by using <a href="http://pivotal.github.com/jasmine/matchers.html" title="Jasmine matchers"><code>this.addMatchers</code></a>.</p>

      <section class="comments">
        <p>
  <a href="#" id="show_comments" class="forward">Show comments</a>
</p>
<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'joecorcoran',
    disqus_title     = 'Testing bound jQuery events',
    showComments     = function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    },
    commentsLink = document.getElementById('show_comments');
commentsLink.onclick = function() {
  showComments();
  commentsLink.style.display = 'none';
  return false;
};
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </section>
    </article>
    <footer id="footer">
  <div class="footer-content">
    <ul>
      <li><a href="/feed.xml"><i class="fa fa-rss"></i>&nbsp;Subscribe</a></li>
  </div>
</footer>

  </body>
</html>
